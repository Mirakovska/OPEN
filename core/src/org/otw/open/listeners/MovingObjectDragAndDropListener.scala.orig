package org.otw.open.listeners

import com.badlogic.gdx.scenes.scene2d.InputEvent
import com.badlogic.gdx.scenes.scene2d.utils.DragListener
import org.otw.open.actors.MovingObjectActor
<<<<<<< HEAD
import org.otw.open.controllers.{CauseAndEffectFinishedSuccessfully, GameState, ScreenController}
import org.otw.open.dto.Point
=======
import org.otw.open.controllers.{CauseAndEffectFinishedUnsuccessfully, CauseAndEffectFinishedSuccessfully, ScreenController}
>>>>>>> d2fb09f6ddc103965e239d5040ca0b8194b6a0d9

/**
  * Created by eilievska on 2/18/2016.
  */
class MovingObjectDragAndDropListener(val actor: MovingObjectActor) extends DragListener {

  override def drag(event: InputEvent, x: Float, y: Float, pointer: Int): Unit = {
    actor.moveBy(x - actor.getWidth / 2, y - actor.getHeight / 2)
  }

  override def dragStop(event: InputEvent, x: Float, y: Float, pointer: Int): Unit = {
<<<<<<< HEAD
    val standPoint: Point = GameState.getLevelStandPoints.head
    val positionWithinTargetRange: Boolean = (actor.getX >= standPoint.x && actor.getX <= standPoint.x + 200
      && actor.getY >= standPoint.y && actor.getY <= standPoint.y + 100)
    if (positionWithinTargetRange) ScreenController.dispatchEvent(CauseAndEffectFinishedSuccessfully)
=======
    val possitionWithinTargetRange: Boolean = actor.getX >= 900 && actor.getX <= 1100 && actor.getY >= 359 && actor.getY <= 552
    if (possitionWithinTargetRange) ScreenController.dispatchEvent(CauseAndEffectFinishedSuccessfully)
>>>>>>> d2fb09f6ddc103965e239d5040ca0b8194b6a0d9
    else {
      actor.resetPosition()
      actor.incrementMissCount
    }
  }
}
